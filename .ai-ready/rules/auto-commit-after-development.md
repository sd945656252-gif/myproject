# Auto Commit After Development Rule

在每完成一轮开发任务后，通过醒目方式提醒用户是否需要自动提交代码，如果用户确认，则执行 git add + commit + push 的提交操作。

## 触发条件

当完成以下类型的开发任务，且当前目录是一个 git 仓库 (即存在 .git/config 文件) 时，需要询问用户是否提交：

1. 代码功能开发（新增功能、修改功能）
2. Bug 修复
3. 代码重构
4. 测试代码添加或修改
5. 文档更新
6. 配置文件修改

## 执行步骤

1. **查看改动状态**
   ```bash
   git status
   ```

2. **查看改动详情**
   ```bash
   git diff
   ```

3. **查看最近的提交历史**（用于保持提交信息风格一致）
   ```bash
   git log --oneline -5
   ```

4. **醒目提醒用户**
   使用醒目的提示 (如加粗的文本) 询问用户是否需要提交代码。

5. **用户确认后执行提交**

   a. **整理 commit message**
      - 遵循现有项目的提交信息风格
      - 使用简洁清晰的语言描述改动内容
      - 推荐格式：`type: description`，其中 type 可以是：
        - `feat`: 新功能
        - `fix`: Bug 修复
        - `refactor`: 代码重构
        - `docs`: 文档更新
        - `test`: 测试相关
        - `chore`: 构建/工具链相关

   b. **暂存改动**
      ```bash
      git add <相关文件>
      ```

   c. **提交改动**
      ```bash
      git commit -m "commit message"
      ```

   d. **推送到远端仓库**
      ```bash
      git push
      ```

## 注意事项

- 如果改动涉及 `.monkeycode` 目录，优先遵循对应的自动提交规则
- 这里的 [提交代码] 指的是 (git add + commit + push)，如果用户需要提交代码，就需要完整执行这三个操作。如果用户不需要提交，那这三个操作就都不要执行。
- 如果推送失败，先执行 `git pull` 解决冲突后再推送
- 如果任务中途失败，根据实际情况决定是否提醒用户提交部分完成的改动
- 提交信息应准确反映改动的本质，而非改动的实现细节
- 每次进行编辑之后，都询问是否需要 提交代码，而不是用户回答一次后，就保持当前选择不再询问了。
